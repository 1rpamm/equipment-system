- model_class = User
.page-header
  %h1 Пользователи
%table.table.table-condensed.table-hover
  %thead
    %tr
      %th= model_class.human_attribute_name(:login)
      %th= model_class.human_attribute_name(:name)
      %th= model_class.human_attribute_name(:email)
      %th= model_class.human_attribute_name(:role)
      %th= model_class.human_attribute_name(:deleted_at)
      %th= model_class.human_attribute_name(:login_count)
      %th= model_class.human_attribute_name(:last_login_at)
      %th=t '.actions', :default => t("helpers.actions")
  %tbody
    - @users.each do |user|
      -if user.deleted_at
        %tr.error
          %td= user.login
          %td= user.name
          %td= user.email
          %td
            = user.admin_user
            = user.admin_equip
            = user.admin_inv
            = user.responsible
            = user.assistant
          %td
            =l user.deleted_at, format: :long
          %td= user.login_count
          %td
            -if user.last_login_at
              =l user.last_login_at, format: :long
          %td
            .btn-group
              = link_to t('.show', :default => t("helpers.links.show")), user_path(user), :class => 'btn btn-mini btn-danger'
              -if logged_in? && current_user.admin_user?
                %button.btn.btn-mini.btn-danger.dropdown-toggle(data-toggle="dropdown")
                  %span.caret
                %ul.dropdown-menu
                  %li= link_to t('.edit', :default => t("helpers.links.edit")), edit_user_path(user)
                  %li= link_to "Восстановить", user_path(user), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm")) }
      -else
        %tr
          %td= user.login
          %td= user.name
          %td= user.email
          %td
            = user.admin_user
            = user.admin_equip
            = user.admin_inv
            = user.responsible
            = user.assistant
          %td
          %td= user.login_count
          %td
            -if user.last_login_at
              =l user.last_login_at, format: :long
          %td
            .btn-group
              = link_to t('.show', :default => t("helpers.links.show")), user_path(user), :class => 'btn btn-mini btn-info'
              -if logged_in? && current_user.admin_user?
                %button.btn.btn-mini.btn-info.dropdown-toggle(data-toggle="dropdown")
                  %span.caret
                %ul.dropdown-menu
                  %li= link_to t('.edit', :default => t("helpers.links.edit")), edit_user_path(user)
                  %li= link_to t('.destroy', :default => t("helpers.links.destroy")), user_path(user), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm")) }

    =paginate @users

-if logged_in? && current_user.admin_user?
  %p
    = link_to"Новый пользователь", new_user_path, class: "btn btn-info"